/**
 * 
 */
package com.silence.vulnerability.service;

import java.util.ArrayList;
import java.util.List;
import java.util.Map;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import com.silence.vulnerability.dao.SiteDao;

/**
 * @title SiteService.java
 * @author liyuanguo
 * @time 2016年10月17日 下午2:48:40
 * @description TODO
 * @version V1.0
 */
@Component
public class SiteService {

	@Autowired
	private SiteDao siteDao;
	
	/**
	 * 
	 * @author liyuanguo
	 * @time 2016年10月17日 下午3:28:09
	 * @description 扫描网站入库
	 * @param url
	 * @param rateTime
	 * @param type
	 * @param encodeUrl
	 * @return
	 */
	public int addSite(String url,int rateTime,int type,String encodeUrl){
		List<Map<String,Object>> list=new ArrayList<Map<String,Object>>();
		list=siteDao.getSiteByEncodeUrl(encodeUrl);
		if(0!=list.size()){
			long id=Long.valueOf(list.get(0).get("id").toString());
			return siteDao.updateSite(id,rateTime, type);
		}else{
			return siteDao.addSite(url, rateTime, type, encodeUrl);
		}
	}
	
}
